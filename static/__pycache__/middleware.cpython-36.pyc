3

ï¿½~(`Kï¿½@s`ddlmZddlmZddlmZddlmZmZddl	m
Z
ddlmZGddï¿½de
ï¿½Zd	S)
ï¿½)ï¿½redirect)ï¿½settings)ï¿½
connection)ï¿½Templateï¿½Context)ï¿½
get_client_ip)ï¿½UserIPc@seZdZddï¿½Zddï¿½ZdS)ï¿½LoginCheckMiddlewarecCs||_dddddddg|_dS)Nz/noticez/accountingz	/dispatchz/hrz/vehiclez	/documentz	/accident)ï¿½get_responseï¿½	check_url)ï¿½selfr
ï¿½r
ï¿½./home/Kingbus/Kingbus_ERP/static/middleware.pyï¿½__init__	szLoginCheckMiddleware.__init__cCsï¿½|j|ï¿½}t|ï¿½}|d}|rrytjj|dï¿½Wqztk
rn}z"td|ï¿½t|dï¿½}|jï¿½WYdd}~XqzXntdï¿½d|jkrï¿½x"|j	D]}|j
j|ï¿½rï¿½tdï¿½Sqï¿½W|S)Nr)ï¿½ipu	
ipì €ìž¥uëª»ì°¾ì•˜ë‹¤ï¿½userzcrudmember:login)
r
rrï¿½objectsï¿½getï¿½	Exceptionï¿½printï¿½saveï¿½sessionrï¿½	path_infoï¿½
startswithr)rï¿½requestï¿½responserï¿½errorï¿½useripï¿½ir
r
rï¿½__call__s 



zLoginCheckMiddleware.__call__N)ï¿½__name__ï¿½
__module__ï¿½__qualname__rrr
r
r
rr	sr	N)ï¿½django.shortcutsrï¿½django.confrï¿½	django.dbrï¿½django.templaterrZ	ipware.iprZcrudmember.modelsrï¿½objectr	r
r
r
rï¿½<module>s