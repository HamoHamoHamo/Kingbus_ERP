{% extends 'base.html' %}
{% load static %}
{% load custom_tags %}
{% block head %}
<meta http-equiv="Cache-Control" content="private, no-cache, no-store, max-age=0, must-revalidate">
<link rel="stylesheet" href="{% static 'css/dispatch/regularlyRoute.css' %}" type="text/css" />
<link rel="stylesheet" href="{% static 'css/pagination.css' %}" type="text/css" />
<link rel="stylesheet" href="{% static 'css/humanresource/member.css' %}" type="text/css" />

<link rel="stylesheet" href="{% static 'css/newVehicle/list.css' %}" type="text/css" />


{% endblock %}

{% block content-header %}
<div class="HeaderTitle">
    차량관리
</div>
{% endblock %}

{% block content %}




<div class="searchAreaBox">
    <form action="">
        <div class="searchTool">
            <span class="searchName">검색종류</span>
            <div class="FilterBox">
                <select name="select" class="inputModules">
                    <option value="vehicle">차량번호</option>
                    <option value="driver">담당기사</option>
                    <option value="passenger">승차인원</option>
                </select>
                <select name="select" class="inputModules">
                    <option value="last">오래된 차량 순</option>
                    <option value="first">최근 차량 순</option>
                </select>
                <input autocomplete="off" value="{{search}}" name="search" type="text" class="inputModules" list="hrFilter">
                <datalist id="hrFilter">
                    <option value="{{member.name}}"></option>
                </datalist>
                <select name="use" class="inputModules">
                    <option value="사용">사용</option>
                    <option value="미사용">미사용</option>
                </select>
            </div>
            <input autocomplete="off" type="submit" value="검색" class="btnModules">
        </div>
    </form>
    <div class="searchAreaRight">
        <div class="searchAreaBtn uploadExcel" onclick="openExcelUploadPopup()">엑셀 업로드</div>
        <div class="searchAreaBtn">
            <a href="{% url 'newVehicle:vehicle_download' %}">엑셀 다운로드</a>
        </div>
        <div class="searchAreaBtn addVehicle" onclick="openCreatePopup()">차량등록</div>
    </div>
</div>



<form method="post" action="{% url 'newVehicle:vehicle_delete_multiple' %}" class="vehicleListForm">
    {% csrf_token %}
    <div class="contentsAreaBox">
        <table class="tableHead">
            <thead>
                <tr class="headerLine">
                    <td>선택</td>
                    <td>번호</td>
                    <td>사용여부</td>
                    <td>차고지</td>
                    <td>차량번호</td>
                    <td>담당기사</td>
                    <td>제조사</td>
                    <td>차량이름</td>
                    <td>승차인원</td>
                    <td>모델연도</td>
                    <td>정기점검일</td>
                    <td>정비내역</td>
                    <td>상세정보</td>
                    <td>차량서류</td>
                </tr>
            </thead>
        </table>

        <table class="tableBody">
            <tbody>
                {% for newVehicle in vehicles %}
                <tr class="{{newVehicle.id}}">
                    <td>
                        <input autocomplete="off" name="vehicle_ids" value="{{newVehicle.id}}" type="checkbox">
                    </td>
                    <td>{{ forloop.counter0|add:start_num }}</td>
                    <td>{% if newVehicle.in_use %}
                            사용    
                        {% else %}
                            미사용
                        {% endif %}</td>
                    <td>{{newVehicle.garage|default_if_none:''}}</td>
                    <td>{{newVehicle.vehicle_number_front|default_if_none:''}} {{newVehicle.vehicle_number_back|default_if_none:''}}</td>
                    <td>{{newVehicle.driver|default_if_none:''}}</td>
                    <td>{{newVehicle.maker|default_if_none:''}}</td>
                    <td>{{newVehicle.vehicle_name|default_if_none:''}}</td>
                    <td>{{newVehicle.passenger_capacity|default_if_none:''}}</td>
                    <td>{{newVehicle.model_year|default_if_none:''}}</td>
                    <td>{{newVehicle.registration_date|default_if_none:''}}</td>
                    <td onclick="openMaintenanceRecordPopup({{ newVehicle.id }})" class="blue">상세보기</td>
                    <td onclick="openDetailPopup({{ newVehicle.id }})">{{ newVehicle.details_count }}/29</td>
                    <td onclick="openDocumentPopup()" class="blue">상세보기</td>
                </tr>
                {% endfor %}
                <tr class="blanckTr"></tr>
            </tbody>
        </table>

        <div class="btnAreaBox">
            <div class="pagination">
                <!-- 페이징 처리 -->
                {% if is_paginated %}
                <div class="pagination">
                    {% if page_obj.has_previous %}
                    <div class="page-item page-pre">
                        <a class="page-link"
                            href="?select={{select}}&search={{search}}&page={{ page_obj.previous_page_number }}&use={{use}}"
                            tabindex="-1">이전</a>
                    </div>
                    {% else %}
                    <div class="page-item page-pre disabled">
                        <a class="page-link" href="#" tabindex="-1">이전</a>
                    </div>
                    {% endif %}
                    {% for page in page_range %}
                    <div class="page-item {% if page == page_obj.number %} page-activate {% endif %}">
                        <a class="page-link"
                            href="?select={{select}}&search={{search}}&page={{ page }}&use={{use}}">{{ page }}</a>
                    </div>
                    {% endfor %}

                    {% if page_obj.has_next %}
                    <div class="page-item">
                        <a class="page-link page-next"
                            href="?select={{select}}&search={{search}}&page={{ page_obj.next_page_number }}&use={{use}}">다음</a>
                    </div>
                    {% else %}
                    <div class="page-item page-next disabled">
                        <a class="page-link" href="#">다음</a>
                    </div>
                    {% endif %}
                </div>
                {% endif %}
            </div>
            <div class="btnBox">
                    <input autocomplete="off" type="submit" value="삭제" class="btnModules">


            </div>

        </div>
    </div>
</form>





{% endblock %}





{% block popup %}
<!--차량등록팝업-->
<div class="popupAreaModules" id="CreatePopup">
    <div class="popupBgModules"></div>
    <form method="post" action="{% url 'newVehicle:vehicle_create' %}"
        class="popupContainer popupContainerDouble memberForm" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="popupHeader">
            <div class="popupTitle popupHR">차량등록</div>
        </div>
        <div class="popupBody popupBodyMember">
            <div class="popupSection">
                <div class="popupArticleCategori">차량정보</div>
                <div class="popupArticleBox">
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">차량번호</label>
                        <div class="popupIdBox">
                            <input  autocomplete="off" id="newVehicle_num" name="vehicle_number_front" class="popupArticleinput hrBirth length100 popupArticleinputShort">

                            <input  autocomplete="off" id="newVehicle_num0" name="vehicle_number_back" class="popupArticleinput hrBirth length100 popupArticleinputShort">
                        </div>
                    </div>
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">제조사</label>
                        <input autocomplete="off" id="makeCompany" name="maker" type="text"
                            class="popupArticleinput makeCompany length100">
                    </div>  
                </div>

                <div class="popupArticleBox">
                    {% comment %} <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel"><span class="importantStar">*</span>입사일</label>
                        <input autocomplete="off" name="entering_date" type="date" max="9999-12-31"
                            class="popupArticleinput hrEntering length100 essential">
                    </div> {% endcomment %}
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">차량이름</label>
                        <input autocomplete="off" id="" name="vehicle_name" type=""
                            class="popupArticleinput length100">
                    </div>
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">출고년도</label>
                        <input autocomplete="off" name="make_year" type="number" class="popupArticleinput length100" default:"2024">
                    </div>
                     {% comment %} <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">출고일자</label>
                        <input autocomplete="off" name="" type="" max="9999-12-31"
                            class="popupArticleinput hrEntering length100 essential">
                    </div>  {% endcomment %}
                    
                </div>
                <div class="popupArticleBox">
                    <div class="popupArticleDouble">
                    <label for="" class="popupArticleLabel">담당기사</label>
                    {% comment %} <input autocomplete="off" id="" name="driver" type="text" class="popupArticleinput length100"> {% endcomment %}
                    {% if driver_list %}
                    <select name="driver" class="popupArticleinput">
                        {% for driver in driver_list %}
                            <option value="{{ driver.id }}">{{ driver.name }}{% if driver.role == '용역' %}(용역){% endif %}</option>
                        {% endfor %}
                    </select>
                    {% else %}
                        <p>No drivers found.</p>
                    {% endif %}
                    </div>
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">차대번호</label>
                        <input autocomplete="off" id="" name="vehicle_serial" type=""
                            class="popupArticleinput length100">
                    </div>
                </div>
                <div class="popupArticleBox">
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">승차인원</label>
                        <input autocomplete="off" id="" name="passenger_capacity" type="number"
                            class="popupArticleinput length100">
                    </div>
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">형식</label>
                        <input autocomplete="off" id="" name="type" type=""
                            class="popupArticleinput length100">
                    </div>
                </div>
                <div class="popupArticleBox">
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">모델연도</label>
                        <input autocomplete="off" name="model_year" type="number" class="popupArticleinput length100" default:"2024">
                    </div>
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">원동기형식</label>
                        <input autocomplete="off" name="fuel_type" type="text" class="popupArticleinput length100" default:"2024">
                    </div>
                </div>
                <div class="popupArticleBox">
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">정기점검일</label>
                        <input autocomplete="off" name="registration_date" type="date" class="popupArticleinput" max="9999-12-31">
                    </div>
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">사용여부</label>
                        <div class="albleRadioBox">
                            <input autocomplete="off" type="radio" value="사용" id="" name="in_use" checked>
                            <label for="ableBus">사용</label>
                            <input autocomplete="off" type="radio" value="미사용" id="" name="in_use">
                            <label for="disableBus">미사용</label>
                        </div>
                    </div>
                </div>
                <div class="popupArticleBox">
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">차고지</label>
                        <input autocomplete="off" name="garage" type="text" class="popupArticleinput">
                    </div>
                </div>



                <div class="popupArticleCategori">차량금액정보</div>
                <div class="popupArticleBox">
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">차량가격</label>
                        <input autocomplete="off" id="" name="vehicle_price" type=""
                            class="popupArticleinput length100">
                    </div>
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">감가상각(월)</label>
                        <input autocomplete="off" id="" name="depreciation_month" type=""
                            class="popupArticleinput length100">
                    </div>
                </div>

                <div class="popupArticleBox">
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">번호판가격</label>
                        <input autocomplete="off" id="" name="number_price" type=""
                            class="popupArticleinput length100">
                    </div>
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">감가상각기준(년)</label>
                        <input autocomplete="off" id="" name="depreciation_year" type=""
                            class="popupArticleinput length100">
                    </div>
                </div>

                <div class="popupArticleBox">
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">보험납부일</label>
                        <input autocomplete="off" name="insurance_pay_date" type="date" class="popupArticleinput" max="9999-12-31">
                    </div>
                </div>

                <div class="popupArticleBox">
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">보험비</label>
                        <input autocomplete="off" id="" name="insurance_price" type=""
                            class="popupArticleinput length100">
                    </div>
                </div>

                <div class="popupArticleBox">
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">할부금액(월)</label>
                        <input autocomplete="off" id="" name="monthly_installment" type=""
                            class="popupArticleinput length100">
                    </div>
                </div>

                <div class="popupArticleBox">
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">남은 할부액</label>
                        <input autocomplete="off" id="" name="remaining_installment_amount" type=""
                            class="popupArticleinput length100">
                    </div>
                </div>


                <div class="popupArticleCategori">차량옵션</div>

                <div class="popupArticleBox">
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">전광판유무</label>
                        <div class="albleRadioBox">
                            <input autocomplete="off" type="radio" value="사용" id="" name="LED" checked>
                            <label for="ableBus">사용</label>
                            <input autocomplete="off" type="radio" value="미사용" id="" name="LED">
                            <label for="disableBus">미사용</label>
                        </div>
                    </div>
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">냉장고유무</label>
                        <div class="albleRadioBox">
                            <input autocomplete="off" type="radio" value="사용" id="" name="cold" checked>
                            <label for="ableBus">사용</label>
                            <input autocomplete="off" type="radio" value="미사용" id="" name="cold">
                            <label for="disableBus">미사용</label>
                        </div>
                    </div>
                </div>

                <div class="popupArticleBox">
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">노래방유무</label>
                        <div class="albleRadioBox">
                            <input autocomplete="off" type="radio" value="사용" id="" name="sing" checked>
                            <label for="ableBus">사용</label>
                            <input autocomplete="off" type="radio" value="미사용" id="" name="sing">
                            <label for="disableBus">미사용</label>
                        </div>
                    </div>
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">USB</label>
                        <div class="albleRadioBox">
                            <input autocomplete="off" type="radio" value="사용" id="" name="USB" checked>
                            <label for="ableBus">사용</label>
                            <input autocomplete="off" type="radio" value="미사용" id="" name="USB">
                            <label for="disableBus">미사용</label>
                        </div>
                    </div>
                </div>

                <div class="popupArticleBox">
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">온수기유무</label>
                        <div class="albleRadioBox">
                            <input autocomplete="off" type="radio" value="사용" id="" name="hot" checked>
                            <label for="ableBus">사용</label>
                            <input autocomplete="off" type="radio" value="미사용" id="" name="hot">
                            <label for="disableBus">미사용</label>
                        </div>
                    </div>
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">TV</label>
                        <div class="albleRadioBox">
                            <input autocomplete="off" type="radio" value="사용" id="" name="TV" checked>
                            <label for="ableBus">사용</label>
                            <input autocomplete="off" type="radio" value="미사용" id="" name="TV">
                            <label for="disableBus">미사용</label>
                        </div>
                    </div>
                </div>

                <div class="popupArticleCategori">비고</div>
                <div class="popupArticleBox popupArticleBoxDoubleHeight">
                    <textarea id="" class="popupArticleBoxTextarea" name="bego"></textarea>
                </div>


                <input name="id" type="hidden" class="sendToHidden">
            </div>
            <div class="popupFooter">
                <button type="submit" class="btnModules btnModulesCreate">저장</button>
                <div class="btnModules popupCloseBtn" onclick="closeCreatePopup()">닫기</div>
            </div>
        </div>
    </form>
</div>

<!--차량상세-->
{% for newVehicle in vehicles %}
<div class="popupAreaModules" id="deatilPopup{{ newVehicle.id }}">
    <div class="popupBgModules"></div>

    <form method="post" id="updateVehicleForm" action="/newVehicle/list/update/{{ newVehicle.id }}/" class="popupContainer popupContainerDouble memberForm" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="popupHeader">
            <div class="popupTitle popupHR">차량상세</div>
            <input type="hidden" name="id" value="{{ newVehicle.id }}">
        </div>
        <div class="popupBody popupBodyMember">
            <div class="popupSection">
                <div class="popupArticleCategori">차량정보</div>
                <div class="popupArticleBox">
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">차량번호</label>
                        <div class="popupIdBox">
                            <input  autocomplete="off" id="newVehicle_num" name="vehicle_number_front" class="popupArticleinput hrBirth length100 popupArticleinputShort" value="{{ newVehicle.vehicle_number_front|default_if_none:'' }}">

                            <input  autocomplete="off" id="newVehicle_num0" name="vehicle_number_back" class="popupArticleinput hrBirth length100 popupArticleinputShort" value="{{ newVehicle.vehicle_number_back|default_if_none:'' }}">
                        </div>
                    </div>
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">제조사</label>
                        <input autocomplete="off" id="makeCompany" name="maker" type="text"
                            class="popupArticleinput makeCompany length100" value="{{newVehicle.maker|default_if_none:''}}">
                    </div>  
                </div>

                <div class="popupArticleBox">
                    {% comment %} <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel"><span class="importantStar">*</span>입사일</label>
                        <input autocomplete="off" name="entering_date" type="date" max="9999-12-31"
                            class="popupArticleinput hrEntering length100 essential">
                    </div> {% endcomment %}
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">차량이름</label>
                        <input autocomplete="off" id="" name="vehicle_name" type=""
                            class="popupArticleinput length100" value="{{newVehicle.vehicle_name|default_if_none:''}}">
                    </div>
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">출고년도</label>
                        <input autocomplete="off" name="make_year" type="number" class="popupArticleinput length100" default:"2024" value="{{ newVehicle.make_year|default_if_none:'' }}">
                    </div>
                     {% comment %} <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">출고일자</label>
                        <input autocomplete="off" name="" type="" max="9999-12-31"
                            class="popupArticleinput hrEntering length100 essential">
                    </div>  {% endcomment %}
                    
                </div>
                <div class="popupArticleBox">
                    <div class="popupArticleDouble">
                    <label for="" class="popupArticleLabel">담당기사</label>
                        {% comment %} <input autocomplete="off" id="" name="driver" type=""
                        class="popupArticleinput length100" value="{{newVehicle.driver|default_if_none:''}}">  {% endcomment %}
                        <select name="driver" class="popupArticleinput">
                            {% for driver in driver_list %}
                            <option value="{{driver.id}}">{{driver.name}}{% if driver.role == '용역'%}(용역){% endif %}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">차대번호</label>
                        <input autocomplete="off" id="" name="vehicle_serial" type=""
                            class="popupArticleinput length100" value="{{newVehicle.vehicle_serial|default_if_none:''}}">
                    </div>
                </div>
                <div class="popupArticleBox">
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">승차인원</label>
                        <input autocomplete="off" id="" name="passenger_capacity" type=""
                            class="popupArticleinput length100" value="{{newVehicle.passenger_capacity|default_if_none:''}}">
                    </div>
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">형식</label>
                        <input autocomplete="off" id="" name="type" type=""
                            class="popupArticleinput length100" value="{{newVehicle.type|default_if_none:''}}">
                    </div>
                </div>
                <div class="popupArticleBox">
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">모델연도</label>
                        <input autocomplete="off" name="model_year" type="number" class="popupArticleinput length100" default:"2024" value="{{newVehicle.model_year|default_if_none:''}}">
                    </div>
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">원동기형식</label>
                        <input autocomplete="off" name="fuel_type" type="text" class="popupArticleinput length100" default:"2024" value="{{newVehicle.fuel_type|default_if_none:''}}">
                    </div>
                </div>
                <div class="popupArticleBox">
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">정기점검일</label>
                        <input autocomplete="off" name="registration_date" type="date" class="popupArticleinput" max="9999-12-31" value="{{newVehicle.registration_date|date:'Y-m-d'}}">
                    </div>
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">사용여부</label>
                        <div class="albleRadioBox">
                            <input autocomplete="off" type="radio" value="True" id="ableBus" name="in_use" 
                            {% if newVehicle.in_use %}checked{% endif %}>
                            <label for="ableBus">사용</label>

                            <input autocomplete="off" type="radio" value="False" id="disableBus" name="in_use"
                            {% if not newVehicle.in_use %}checked{% endif %}>
                            <label for="disableBus">미사용</label>
                        </div>
                    </div>
                </div>

                <div class="popupArticleBox">
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">차고지</label>
                        <input autocomplete="off" name="garage" type="text" class="popupArticleinput" value="{{newVehicle.garage|default_if_none:''}}">
                    </div>
                </div>


                <div class="popupArticleCategori">차량금액정보</div>
                <div class="popupArticleBox">
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">차량가격</label>
                        <input autocomplete="off" id="" name="vehicle_price" type=""
                            class="popupArticleinput length100" value="{{newVehicle.vehicle_price|default_if_none:''}}">
                    </div>
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">감가상각(월)</label>
                        <input autocomplete="off" id="" name="depreciation_month" type=""
                            class="popupArticleinput length100" value="{{newVehicle.depreciation_month|default_if_none:''}}">
                    </div>
                </div>

                <div class="popupArticleBox">
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">번호판가격</label>
                        <input autocomplete="off" id="" name="number_price" type="number"
                            class="popupArticleinput length100" value="{{ newVehicle.number_price|default_if_none:'' }}">
                    </div>
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">감가상각기준(년)</label>
                        <input autocomplete="off" id="" name="depreciation_year" type=""
                            class="popupArticleinput length100" value="{{newVehicle.depreciation_year|default_if_none:''}}">
                    </div>
                </div>

                <div class="popupArticleBox">
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">보험납부일</label>
                        <input autocomplete="off" name="insurance_pay_date" type="date" class="popupArticleinput" max="9999-12-31" value="{{newVehicle.insurance_pay_date|date:'Y-m-d'}}">
                    </div>
                </div>

                <div class="popupArticleBox">
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">보험비</label>
                        <input autocomplete="off" id="" name="insurance_price" type=""
                            class="popupArticleinput length100" value="{{newVehicle.insurance_price|default_if_none:''}}">
                    </div>
                </div>

                <div class="popupArticleBox">
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">할부금액(월)</label>
                        <input autocomplete="off" id="" name="monthly_installment" type=""
                            class="popupArticleinput length100" value="{{newVehicle.monthly_installment|default_if_none:''}}">
                    </div>
                </div>

                <div class="popupArticleBox">
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">남은 할부액</label>
                        <input autocomplete="off" id="" name="remaining_installment_amount" type=""
                            class="popupArticleinput length100" value="{{newVehicle.remaining_installment_amount|default_if_none:''}}">
                    </div>
                </div>


                <div class="popupArticleCategori">차량옵션</div>

                <div class="popupArticleBox">
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">전광판유무</label>
                        <div class="albleRadioBox">
                            <input type="radio" value="True" name="led" {% if newVehicle.led %}checked{% endif %}> <label>사용</label>
                            <input type="radio" value="False" name="led" {% if not newVehicle.led %}checked{% endif %}> <label>미사용</label>
                        </div>
                    </div>
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">냉장고유무</label>
                        <div class="albleRadioBox">
                            <input type="radio" value="True" name="cold" {% if newVehicle.cold %}checked{% endif %}> <label>사용</label>
                            <input type="radio" value="False" name="cold" {% if not newVehicle.cold %}checked{% endif %}> <label>미사용</label>
                        </div>
                    </div>
                </div>

                <div class="popupArticleBox">
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">노래방유무</label>
                        <div class="albleRadioBox">
                            
                            <input type="radio" value="True" name="sing" {% if newVehicle.sing %}checked{% endif %}> <label>사용</label>
                            <input type="radio" value="False" name="sing" {% if not newVehicle.sing %}checked{% endif %}> <label>미사용</label>

                        </div>
                    </div>
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">USB</label>
                        <div class="albleRadioBox">
                            <input type="radio" value="True" name="usb" {% if newVehicle.usb %}checked{% endif %}> <label>사용</label>
                            <input type="radio" value="False" name="usb" {% if not newVehicle.usb %}checked{% endif %}> <label>미사용</label>

                        </div>
                    </div>
                </div>

                <div class="popupArticleBox">
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">온수기유무</label>
                        <div class="albleRadioBox">
                            <input type="radio" value="True" name="hot" {% if newVehicle.hot %}checked{% endif %}> <label>사용</label>
                            <input type="radio" value="False" name="hot" {% if not newVehicle.hot %}checked{% endif %}> <label>미사용</label>
                        </div>
                    </div>
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">TV</label>
                        <div class="albleRadioBox">
                            <input type="radio" value="True" name="tv" {% if newVehicle.tv %}checked{% endif %}> <label>사용</label>
                            <input type="radio" value="False" name="tv" {% if not newVehicle.tv %}checked{% endif %}> <label>미사용</label>
                        </div>
                    </div>
                </div>

                <div class="popupArticleCategori">비고</div>
                <div class="popupArticleBox popupArticleBoxDoubleHeight">
                    <textarea id="" class="popupArticleBoxTextarea" name="remark">{{newVehicle.remark|default_if_none:''}}</textarea>
                </div>

                <input name="id" type="hidden" class="sendToHidden">
            </div>
            <div class="popupFooter">
                <button type="submit" class="btnModules btnModulesCreate">수정</button>
                <div class="btnModules popupCloseBtn" onclick="closeDetailPopup({{newVehicle.id}})">닫기</div>

            </div>
        </div>
    </form>
</div>
{% endfor %}


<!--정비내역팝업-->

{% for newVehicle in vehicles %}
<div class="popupAreaModules" id="MaintenanceRecordPopup{{ newVehicle.id }}">
    <p>ID: {{ newVehicle.id }}</p>
    <div class="popupBgModules"></div>

    <!-- 정비내역 생성 및 삭제 폼 -->
    <form method="post" action="{% url 'newVehicle:maintenance_create_or_delete' newVehicle.id %}" class="popupContainer popupContainerDouble">
        {% csrf_token %}
        <!-- 정비내역 등록 섹션 -->
        <div class="popupHeader">
            <div class="popupTitle popupHR">정비내역 등록</div>
        </div>
        <div class="popupBody popupBodyMember popupRepairScroll">
            <div class="popupSection">
                <div class="popupArticleCategori">정비금액</div>
                <div class="popupArticleBox">
                    <div class="popupArticleDouble">
                        <label for="total_maintenance_cost" class="popupArticleLabel">총정비금액</label>
                        <input autocomplete="off" id="total_maintenance_cost" name="total_maintenance_cost" type="text"
                            class="popupArticleinput length100" value="{{ newVehicle.total_maintenance_cost }}">
                    </div>
                    <div class="popupArticleDouble">
                        <label for="total_tuning_cost" class="popupArticleLabel">총튜닝금액</label>
                        <input autocomplete="off" id="total_tuning_cost" name="total_tuning_cost" type="text" value="{{ newVehicle.total_tuning_cost }}"
                            class="popupArticleinput length100">
                    </div>
                </div>

                <!-- 정비등록 -->
                <div class="popupArticleCategori">정비등록</div>
                <div class="popupArticleBox">
                    <div class="popupArticleDouble">
                        <label for="type" class="popupArticleLabel">구분</label>
                        <select class="popupArticleinput inputMonth" name="type">
                            <option value="정비">정비</option>
                            <option value="튜닝">튜닝</option>
                            <option value="점검">점검</option>
                        </select>
                    </div>
                    <div class="popupArticleDouble">
                        <label for="work_date" class="popupArticleLabel">작업날짜</label>
                        <input autocomplete="off" name="work_date" type="date" class="popupArticleinput">
                    </div>
                </div>
                <div class="popupArticleBox">
                    <div class="popupArticleDouble">
                        <label for="content" class="popupArticleLabel">작업내용</label>
                        <input autocomplete="off" name="content" type="text" class="popupArticleinput">
                    </div>
                    <div class="popupArticleDouble">
                        <label for="cost" class="popupArticleLabel">비용</label>
                        <input autocomplete="off" name="cost" type="text" class="popupArticleinput">
                    </div>
                </div>

                <div class="creatBtn">
                    <button type="submit" name="action" value="create" class="btnModules btnModulesCreate repairCreate">등록</button>
                </div>
            </div>

            <!-- 정비내역 삭제 섹션 -->
            <div class="popupArticleCategori">정비내역</div>
            <div class="maintenanceSearchForm">
                <input autocomplete="off" name="check_date" type="month" class="popupArticleinput inputMonth">
                <select class="popupArticleinput inputMonth">
                    <option value="전체" selected>전체</option>
                    <option value="정비">정비</option>
                    <option value="튜닝">튜닝</option>
                    <option value="점검">점검</option>
                </select>
            </div>

            <div class="popupArticle popupArticleStation detailMapPopupScrollBox popupMaintenanceForm">
                <table>
                    <thead class="tableHead">
                        <tr>
                            <th>선택</th>
                            <th>번호</th>
                            <th>구분</th>
                            <th>작업일짜</th>
                            <th>작업내용</th>
                            <th>비용</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for maintenance in maintenance_records %}
                        <tr>
                            <td>
                                <input type="checkbox" name="maintenance_ids" value="{{ maintenance.id }}">
                            </td>
                            <td>{{ forloop.counter }}</td>
                            <td>{{ maintenance.type }}</td>
                            <td>{{ maintenance.work_date }}</td>
                            <td>{{ maintenance.content }}</td>
                            <td>{{ maintenance.cost }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
                
            </div>
            <div class="deleteBtnSection">
                <button type="submit" name="action" value="delete" class="btnModules deleteBtn">삭제</button>
            </div>
        </div>

        <div class="popupFooter">
            <button type="button" class="btnModules popupCloseBtn maintenanceClose" onclick="closeMaintenanceRecordPopup({{ newVehicle.id }})">닫기</button>
        </div>
    </form>
</div>
{% endfor %}


<script>
function closeMaintenanceRecordPopup(id) {
    document.getElementById('MaintenanceRecordPopup' + id).style.display = 'none';
}
</script>


<div class="popupAreaModules" id="documentPopup">
    <div class="popupBgModules"></div>
    <form method="post" action=""
    class="popupContainer popupContainerDouble " enctype="multipart/form-data">
    {% csrf_token %}
        <div class="popupHeader">
            <div class="popupTitle popupHR">차량서류</div>
        </div>
        <div class="popupBody popupBodyMember">
            <div class="popupSection">
                <div class="popupArticleCategori">서류 등록</div>
                <div class="popupArticleBox">
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">차량등록증</label>
                        <div class="popupArticleFileDouble">
                            <label for="resume">파일 선택</label>
                            <input autocomplete="off" name="RESUME" type="file" id="resume" class="documentFile">
                            <input autocomplete="off" type="text" readonly="" class="pointer">
                            <svg class="fileDeleteBtn documentDeleteBtn" xmlns="http://www.w3.org/2000/svg" width="11.314" height="11.314" viewBox="0 0 11.314 11.314">
                                <g id="그룹_1513" data-name="그룹 1513" transform="translate(-442.649 -1001.97) rotate(45)">
                                    <line id="선_691" data-name="선 691" y2="12" transform="translate(1029.5 389.5)" fill="none" stroke="#000" stroke-linecap="round" stroke-width="2"></line>
                                    <line id="선_692" data-name="선 692" y2="12" transform="translate(1035.5 395.5) rotate(90)" fill="none" stroke="#000" stroke-linecap="round" stroke-width="2"></line>
                                </g>
                            </svg>
                            <input type="hidden" value="">
                        </div>
                    </div>
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">자동차기능종합진단서</label>
                        <div class="popupArticleFileDouble">
                            <label for="carpooling_agreement">파일 선택</label>
                            <input autocomplete="off" name="CARPOOLING_AGREEMENT" type="file" id="carpooling_agreement" class="documentFile">
                            <input autocomplete="off" type="text" readonly="" class="pointer">
                            <svg class="fileDeleteBtn documentDeleteBtn" xmlns="http://www.w3.org/2000/svg" width="11.314" height="11.314" viewBox="0 0 11.314 11.314">
                                <g id="그룹_1513" data-name="그룹 1513" transform="translate(-442.649 -1001.97) rotate(45)">
                                    <line id="선_691" data-name="선 691" y2="12" transform="translate(1029.5 389.5)" fill="none" stroke="#000" stroke-linecap="round" stroke-width="2"></line>
                                    <line id="선_692" data-name="선 692" y2="12" transform="translate(1035.5 395.5) rotate(90)" fill="none" stroke="#000" stroke-linecap="round" stroke-width="2"></line>
                                </g>
                            </svg>
                            <input type="hidden" value="">
                        </div>
                    </div>
                </div>
                <div class="popupArticleBox">
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">차량보험</label>
                        <div class="popupArticleFileDouble">
                            <label for="resume">파일 선택</label>
                            <input autocomplete="off" name="RESUME" type="file" id="resume" class="documentFile">
                            <input autocomplete="off" type="text" readonly="" class="pointer">
                            <svg class="fileDeleteBtn documentDeleteBtn" xmlns="http://www.w3.org/2000/svg" width="11.314" height="11.314" viewBox="0 0 11.314 11.314">
                                <g id="그룹_1513" data-name="그룹 1513" transform="translate(-442.649 -1001.97) rotate(45)">
                                    <line id="선_691" data-name="선 691" y2="12" transform="translate(1029.5 389.5)" fill="none" stroke="#000" stroke-linecap="round" stroke-width="2"></line>
                                    <line id="선_692" data-name="선 692" y2="12" transform="translate(1035.5 395.5) rotate(90)" fill="none" stroke="#000" stroke-linecap="round" stroke-width="2"></line>
                                </g>
                            </svg>
                            <input type="hidden" value="">
                        </div>
                    </div>
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">차량할부</label>
                        <div class="popupArticleFileDouble">
                            <label for="carpooling_agreement">파일 선택</label>
                            <input autocomplete="off" name="CARPOOLING_AGREEMENT" type="file" id="carpooling_agreement" class="documentFile">
                            <input autocomplete="off" type="text" readonly="" class="pointer">
                            <svg class="fileDeleteBtn documentDeleteBtn" xmlns="http://www.w3.org/2000/svg" width="11.314" height="11.314" viewBox="0 0 11.314 11.314">
                                <g id="그룹_1513" data-name="그룹 1513" transform="translate(-442.649 -1001.97) rotate(45)">
                                    <line id="선_691" data-name="선 691" y2="12" transform="translate(1029.5 389.5)" fill="none" stroke="#000" stroke-linecap="round" stroke-width="2"></line>
                                    <line id="선_692" data-name="선 692" y2="12" transform="translate(1035.5 395.5) rotate(90)" fill="none" stroke="#000" stroke-linecap="round" stroke-width="2"></line>
                                </g>
                            </svg>
                            <input type="hidden" value="">
                        </div>
                    </div>
                </div>
                <div class="popupArticleBox">
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">버스 앞사진</label>
                        <div class="popupArticleFileDouble">
                            <label for="resume">파일 선택</label>
                            <input autocomplete="off" name="" type="file" id="resume" class="documentFile">
                            <input autocomplete="off" type="text" readonly="" class="pointer">
                            <svg class="fileDeleteBtn documentDeleteBtn" xmlns="http://www.w3.org/2000/svg" width="11.314" height="11.314" viewBox="0 0 11.314 11.314">
                                <g id="그룹_1513" data-name="그룹 1513" transform="translate(-442.649 -1001.97) rotate(45)">
                                    <line id="선_691" data-name="선 691" y2="12" transform="translate(1029.5 389.5)" fill="none" stroke="#000" stroke-linecap="round" stroke-width="2"></line>
                                    <line id="선_692" data-name="선 692" y2="12" transform="translate(1035.5 395.5) rotate(90)" fill="none" stroke="#000" stroke-linecap="round" stroke-width="2"></line>
                                </g>
                            </svg>
                            <input type="hidden" value="">
                        </div>
                    </div>
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">버스 뒤 사진</label>
                        <div class="popupArticleFileDouble">
                            <label for="carpooling_agreement">파일 선택</label>
                            <input autocomplete="off" name="" type="file" id="carpooling_agreement" class="documentFile">
                            <input autocomplete="off" type="text" readonly="" class="pointer">
                            <svg class="fileDeleteBtn documentDeleteBtn" xmlns="http://www.w3.org/2000/svg" width="11.314" height="11.314" viewBox="0 0 11.314 11.314">
                                <g id="그룹_1513" data-name="그룹 1513" transform="translate(-442.649 -1001.97) rotate(45)">
                                    <line id="선_691" data-name="선 691" y2="12" transform="translate(1029.5 389.5)" fill="none" stroke="#000" stroke-linecap="round" stroke-width="2"></line>
                                    <line id="선_692" data-name="선 692" y2="12" transform="translate(1035.5 395.5) rotate(90)" fill="none" stroke="#000" stroke-linecap="round" stroke-width="2"></line>
                                </g>
                            </svg>
                            <input type="hidden" value="">
                        </div>
                    </div>
                </div>
                <div class="popupArticleBox">
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">버스 운전석쪽 옆사진</label>
                        <div class="popupArticleFileDouble">
                            <label for="resume">파일 선택</label>
                            <input autocomplete="off" name="" type="file" id="resume" class="documentFile">
                            <input autocomplete="off" type="text" readonly="" class="pointer">
                            <svg class="fileDeleteBtn documentDeleteBtn" xmlns="http://www.w3.org/2000/svg" width="11.314" height="11.314" viewBox="0 0 11.314 11.314">
                                <g id="그룹_1513" data-name="그룹 1513" transform="translate(-442.649 -1001.97) rotate(45)">
                                    <line id="선_691" data-name="선 691" y2="12" transform="translate(1029.5 389.5)" fill="none" stroke="#000" stroke-linecap="round" stroke-width="2"></line>
                                    <line id="선_692" data-name="선 692" y2="12" transform="translate(1035.5 395.5) rotate(90)" fill="none" stroke="#000" stroke-linecap="round" stroke-width="2"></line>
                                </g>
                            </svg>
                            <input type="hidden" value="">
                        </div>
                    </div>
                    <div class="popupArticleDouble">
                        <label for="" class="popupArticleLabel">버스 운전석쪽 옆사진</label>
                        <div class="popupArticleFileDouble">
                            <label for="carpooling_agreement">파일 선택</label>
                            <input autocomplete="off" name="" type="file" id="carpooling_agreement" class="documentFile">
                            <input autocomplete="off" type="text" readonly="" class="pointer">
                            <svg class="fileDeleteBtn documentDeleteBtn" xmlns="http://www.w3.org/2000/svg" width="11.314" height="11.314" viewBox="0 0 11.314 11.314">
                                <g id="그룹_1513" data-name="그룹 1513" transform="translate(-442.649 -1001.97) rotate(45)">
                                    <line id="선_691" data-name="선 691" y2="12" transform="translate(1029.5 389.5)" fill="none" stroke="#000" stroke-linecap="round" stroke-width="2"></line>
                                    <line id="선_692" data-name="선 692" y2="12" transform="translate(1035.5 395.5) rotate(90)" fill="none" stroke="#000" stroke-linecap="round" stroke-width="2"></line>
                                </g>
                            </svg>
                            <input type="hidden" value="">
                        </div>
                    </div>
                </div>
                <div class="popupFooter">
                    <button type="submit" class="btnModules btnModulesCreate" value="저장">저장</button>
                    <div class="btnModules popupCloseBtn" onclick="closeDocumentPopup()">닫기</div>
                    
                </div>
            </div>
        </div>
        
    </form>
</div>









{% comment %} <div class="popupAreaModules" id="excelPopup">
    <div class="popupBgModules"></div>
    <form method="post" action="" enctype="multipart/form-data" class="popupContainer excelUploadPopupContainer">
        {% csrf_token %}
        <div class="popupHeader">
            <div class="popupTitle">엑셀 업로드</div>
        </div>
        <div class="popupBody">
            <div class="popupSection excelUploadPopupSection">
                <div class="popupArticleFileDouble excelUploadPopupArticleFileDouble">
                    <label for="excelUploadFile" class="popupArticleLabel">파일선택</label>
                    <input autocomplete="off" name="excelUploadFile" type="file" id="excelUploadFile" class="excelUploadFile">
                    <input autocomplete="off" name="" type="text" class="excelUploadFileText" readonly>
                    <svg class="fileDeleteBtn" xmlns="http://www.w3.org/2000/svg" width="11.314" height="11.314"
                        viewBox="0 0 11.314 11.314">
                        <g id="그룹_1513" data-name="그룹 1513" transform="translate(-442.649 -1001.97) rotate(45)">
                            <line id="선_691" data-name="선 691" y2="12" transform="translate(1029.5 389.5)" fill="none"
                                stroke="#000" stroke-linecap="round" stroke-width="2" />
                            <line id="선_692" data-name="선 692" y2="12" transform="translate(1035.5 395.5) rotate(90)"
                                fill="none" stroke="#000" stroke-linecap="round" stroke-width="2" />
                        </g>
                    </svg>
                </div>
            </div>
            <div class="popupFooter excelUploadPopupFooter">
                <div class="popupFooterMinibox">
                    <a href="{% static 'form/차량목록 엑셀 업로드 양식.xlsx' %}" download>
                        <div class="btnModules backgroundBlack">양식다운</div>
                    </a>
                </div>
                <input autocomplete="off" type="submit" class="btnModules uploadCrateBtn backgroundBlue" value="등록">
                <div class="btnModules popupCloseBtn closeBtn">닫기</div>
            </div>
        </div>
    </form>
</div> {% endcomment %}

<div class="popupAreaModules" id="excelPopup">
    <div class="popupBgModules"></div>
    <form method="post" action="{% url 'newVehicle:vehicle_excel_upload' %}" enctype="multipart/form-data" class="popupContainer excelUploadPopupContainer">
        {% csrf_token %}
        <div class="popupHeader">
            <div class="popupTitle">엑셀 업로드</div>
        </div>
        <div class="popupBody">
            <div class="popupSection excelUploadPopupSection">
                <div class="popupArticleFileDouble excelUploadPopupArticleFileDouble">
                    <label for="excelUploadFile" class="popupArticleLabel">파일선택</label>
                    <input autocomplete="off" name="excelUploadFile" type="file" id="excelUploadFile" class="excelUploadFile">
                    <input autocomplete="off" name="" type="text" class="excelUploadFileText" readonly>
                    <svg class="fileDeleteBtn" xmlns="http://www.w3.org/2000/svg" width="11.314" height="11.314"
                        viewBox="0 0 11.314 11.314">
                        <g id="그룹_1513" data-name="그룹 1513" transform="translate(-442.649 -1001.97) rotate(45)">
                            <line id="선_691" data-name="선 691" y2="12" transform="translate(1029.5 389.5)" fill="none"
                                stroke="#000" stroke-linecap="round" stroke-width="2" />
                            <line id="선_692" data-name="선 692" y2="12" transform="translate(1035.5 395.5) rotate(90)"
                                fill="none" stroke="#000" stroke-linecap="round" stroke-width="2" />
                        </g>
                    </svg>
                </div>
            </div>
            <div class="popupFooter excelUploadPopupFooter">
                <div class="popupFooterMinibox">
                    <a href="{% static 'form/차량목록 엑셀 업로드 양식.xlsx' %}" download>
                        <div class="btnModules backgroundBlack">양식다운</div>
                    </a>
                </div>
                <input autocomplete="off" type="submit" class="btnModules uploadCrateBtn backgroundBlue" value="등록">
                <div class="btnModules popupCloseBtn closeBtn" onclick="closeExcelUploadPopup()">닫기</div>
            </div>
        </div>
    </form>
</div>
<script>
    // 파일 선택 시 파일명을 텍스트 필드에 표시하는 함수
    document.getElementById("excelUploadFile").addEventListener("change", function(){
        var fileName = this.files[0].name;  // 선택된 파일의 이름 가져오기
        document.querySelector(".excelUploadFileText").value = fileName;  // 파일명을 텍스트 필드에 표시
    });

    // 파일 삭제 버튼 클릭 시 파일명을 지우고 파일 선택 필드 초기화
    document.querySelector(".fileDeleteBtn").addEventListener("click", function(){
        document.getElementById("excelUploadFile").value = "";  // 파일 선택 필드 초기화
        document.querySelector(".excelUploadFileText").value = "";  // 파일명 텍스트 필드 초기화
    });
</script>
{% endblock %}






{% block script %}
<script>
    function closeCreatePopup(){
        document.querySelector("#CreatePopup").style.display = "none";
    }

    function openCreatePopup(){
        document.querySelector("#CreatePopup").style.display = "block";
    }
    function openMaintenanceRecordPopup(newVehicleId) {
        // 해당 차량의 팝업 열기
        document.getElementById('MaintenanceRecordPopup' + newVehicleId).style.display = 'block';
    }

    function closeMaintenanceRecordPopup(newVehicleId) {
        // 해당 차량의 팝업 닫기
        document.getElementById('MaintenanceRecordPopup' + newVehicleId).style.display = 'none';
    }

    function openDocumentPopup() {
        document.querySelector("#documentPopup").style.display="block";
    }

    function closeDocumentPopup() {
        document.querySelector("#documentPopup").style.display="none";
    }

    function openExcelUploadPopup() {
        document.querySelector("#excelPopup").style.display="block";
    }

    function closeExcelUploadPopup() {
        document.querySelector("#excelPopup").style.display="none";
    }

    {% comment %} function closeDetailPopup() {
        document.querySelector("#deatilPopup").style.display="none";
    } {% endcomment %}


    console.log(regDatas)

    function openViweBlankVehilcle(url) {
        window.open(url, "차량등록증", "width=630, height=891")
    }

    function openDetailPopup(newVehicleId) {
        console.log("Opening popup for vehicle ID:", newVehicleId); // 전달된 ID 확인
    
        // 모든 팝업을 닫음 (모든 팝업을 찾아서 닫는 코드가 제대로 동작하는지 확인)
        const allPopups = document.querySelectorAll('.popupAreaModules');
        allPopups.forEach(popup => {
            popup.style.display = 'none'; // 모든 팝업을 닫음
        });
    
        // 전달받은 newVehicleId로 해당하는 팝업을 열기
        const popupElement = document.querySelector("#deatilPopup" + newVehicleId);
        if (popupElement) {
            console.log("Found popup element:", popupElement);  // 찾은 팝업 요소 로그 출력
            popupElement.style.display = "block";  // 팝업 열기
        } else {
            console.error("Popup with ID deatilPopup" + newVehicleId + " not found.");
        }
    }
    // 팝업 닫기 함수
    function closeDetailPopup(newVehicleId) {
        const popupElement = document.querySelector("#deatilPopup" + newVehicleId);
        if (popupElement) {
            popupElement.style.display = "none";  // 팝업 닫기
        } else {
            console.error("Popup with ID deatilPopup" + newVehicleId + " not found.");
        }
    }

</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.15.5/xlsx.full.min.js"></script>
<script src="{% static 'js/newVehicle/list.js' %}"></script>
<script src="{% static 'js/newvehicle/excel.js' %}"></script>  
{% endblock %}