{% extends 'base.html' %}
{% load static %}
{% block head %}
<link rel="stylesheet" href="{% static 'css/notice/notice_detail.css' %}" type="text/css" />
<link rel="stylesheet" href="{% static 'css/notice/notice_create.css' %}" type="text/css" />
{% endblock %}

{% block content-header %}
<!--trp HeaderTitle-->
<div class="HeaderTitle">
  <div class="HeaderTitleIcorn">
    <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="24px" viewbox="0 0 24 24"
      width="24px" fill="#FFFFFF">
      <g>
        <rect fill="none" height="24" width="24" />
        <path
          d="M17,12c-2.76,0-5,2.24-5,5s2.24,5,5,5c2.76,0,5-2.24,5-5S19.76,12,17,12z M18.65,19.35l-2.15-2.15V14h1v2.79l1.85,1.85 L18.65,19.35z M18,3h-3.18C14.4,1.84,13.3,1,12,1S9.6,1.84,9.18,3H6C4.9,3,4,3.9,4,5v15c0,1.1,0.9,2,2,2h6.11 c-0.59-0.57-1.07-1.25-1.42-2H6V5h2v3h8V5h2v5.08c0.71,0.1,1.38,0.31,2,0.6V5C20,3.9,19.1,3,18,3z M12,5c-0.55,0-1-0.45-1-1 c0-0.55,0.45-1,1-1c0.55,0,1,0.45,1,1C13,4.55,12.55,5,12,5z" />
      </g>
    </svg>
  </div>
  <!-- 페이지별 Title 변경 -->
  공지사항
</div>
{% endblock %}

{% block content-nav %}
<ul class="nav">
  <a href="{% url 'notice:kinds' 'driver' %}">
    <li class="navList navFirst">
      기사님 공지사항
    </li>
  </a>
  </li>
  <a href="{% url 'notice:kinds' 'office' %}">
    <li class="navList navLast">
      사무실 공지사항
    </li>
  </a>
  </li>
</ul>
{% endblock %}


{% block content %}

<div class="contentsBoxCell" id="contentsBoxCellNoticeDetail">

  <div class="contentsBoxHeader">
    {% if notice.kinds == "driver" %}
        기사님 공지사항
        {% elif notice.kinds == "office" %}
        사무실 공지사항
        {% endif %}
        {% if notice.creator.id == request.session.user %}
        <form action="{% url 'notice:delete' notice.kinds notice.id %}" class="noticeDetailDelet">
          <input type="submit" value="삭제" class="button contentsBoxHeaderButton rocateTop">
        </form>
        <form action="{% url 'notice:edit' notice.kinds notice.id %}" class="noticeDetailEdit">
          <input type="submit" value="수정" class="button contentsBoxHeaderButton rocateTop">
        </form>
        {% endif %}
        
  </div>


  <div class="contentsBoxContents" id="noticeContentsBoxContents">

    

      <div class="searchTool" id="noticeDetailSearchTool">
        <lable class="searchToolLabel" id="noticeDetailSearchToolLabelTitle">제목</lable>
        <div class="searchToolText" id="noticeDetailSearchToolText">{{ notice.title }}</div>
        <div class="searchToolRight">
          <lable class="searchToolLabel" id="noticeDetailSearchToolLabelcreater">작성자</lable>
          <div class="searchToolText" id="noticeDetailSearchToolcreater">{{ notice.creator }}</div>
          <lable class="searchToolLabel" id="noticeDetailSearchToolLabeldate">등록일</lable>
          <div class="searchToolText" id="noticeDetailSearchTooldate">{{notice.pub_date | date:'Y.m.d H:i'}}</div>
          <lable class="searchToolLabel" id="noticeDetailSearchToolLabelview">조회수</lable>
          <div class="searchToolText" id="noticeDetailSearchToolview">{{view_cnt}}</div>
        </div> 
      </div>
      <div class="searchTool" id="noticeDetailsearchToolFile">
        <lable class="searchToolLabel" id="noticeCreateSearchToolLabelFile">첨부파일</lable>
        <div class="searchToolText" id="noticeDetailSearchToolFile">
          {% for file in notice_files %}
            <a href="{% url 'notice:download' notice.kinds notice.id file.id %}">{{file.filename}}</a>
            {% endfor %}
        </div>
      </div>
      <div class="textareaBasicForm" id="noticeDetailTextareaBasicForm">{{notice.content}}</div>

      
        <div class="notice_detail_chat_Box">
          <div class="notice_detail_chat_Box_load">
            {% for comment in notice_comments %}
            <table class="notice_detail_chat_Box_load_cell">
              <tr class="notice_detail_chat_Box_load_cell_intormation">
                <td>{{comment.creator}} ({{comment.pub_date | date:'Y.m.d H:i:s'}})
                  {% if request.session.user == comment.creator.id %}
                  <a class="notice_detail_chat_Box_load_cell_button"
                    {% if request.session.user == notice.creator.id %}href="{% url 'notice:comment_del' notice.kinds notice.id comment.id %}">삭제</a> {% endif %}
                  {% endif %}
                  <a href="" class="notice_detail_chat_Box_load_cell_button"
                    id="notice_detail_chat_Box_load_cell_button_delet"></a>
                </td>
              </tr>
              <tr class="notice_detail_chat_Box_load_cell_contents">
                <td>{{comment.content}}</td>
              </tr>
            </table>
            {% endfor %}

          </div>
          <form action="" method="post" class="notice_detail_chat_Box_create_form">
            <div class="notice_detail_chat_Box_create">

              {% csrf_token %}
              <textarea name="content" cols="30" rows="10" class="notice_detail_chat_textarea"></textarea>
              <input required type="submit" value="등록" class="button" id="noticeDetailButton">

            </div>
          </form>
        </div>

  </div>

  <table class="notice_detail_list_pagenation">
    <tr>
      <td class="notice_detail_list_pagenation_prev" id="notice_detail_list_pagenation_prev_button">다음글</td>
      <td class="notice_detail_list_pagenation_prev" id="notice_detail_list_pagenation_prev_title">
        {% if next.0 %} <a href="{% url 'notice:detail' notice.kinds next.0.id %}">{{next.0.title}}</a> {% endif %}
      </td>
      <td rowspan="2" class="notice_detail_list_pagenation_back_button">
        <a href="{% url 'notice:kinds' 'driver' %}">목록으로 돌아가기</a></td>
    </tr>
    <tr class="notice_detail_list_pagenation_next">
      <td class="notice_detail_list_pagenation_prev" id="notice_detail_list_pagenation_next_button">이전글</td>
      <td class="notice_detail_list_pagenation_prev" id="notice_detail_list_pagenation_next_title">
        {% if pre.0 %} <a href="{% url 'notice:detail' notice.kinds pre.0.id %}">{{pre.0.title}}</a>{% endif %}
      </td>
    </tr>
  </table>

</div>

{% endblock %}